function setBanner(){function e(){a=++a>s.length-1?0:a,t.removeClass("current"),t.eq(a).addClass("current"),s.removeClass("active");var e=s.eq(a);e.addClass("active"),e.css("opacity","0"),animate(e[0],{opacity:100},40)}var t=$(".circle-list li"),s=$(".banner-list li"),a=0,n=null;t.on("click",function(){if($(this).index()!=a){a=$(this).index(),$(this).addClass("current").siblings("li").removeClass("current"),s.removeClass("active");var e=s.eq(a);e.addClass("active"),e.css("opacity","0"),animate(e[0],{opacity:100},40)}}),n=setInterval(e,3e3),$(".banner-list").mouseenter(function(){clearInterval(n)}),$(".banner-list").mouseleave(function(){n=setInterval(e,3e3)})}function getData(e,t,s,a,n){$.ajax({url:e,type:t,dataType:s,data:a,success:n})}function setAddress(e,t,s,a){$("#"+e+" .select-options").children("li").remove(),$.each(t,function(t,s){var a=$("<li></li>").html(s.name).attr("value",s.code);$("#"+e+" .select-options").append(a)});var n=$("#"+e+" .select-options").children("li:eq(0)").attr("value"),o=$("#"+e+" .select-options").children("li:eq(0)")[0].innerHTML;if($("#"+e+" .select-name").html(o),null!=s){var i={citycode:n,flag:s};getData(config.addressUrl,"get","jsonp",i,a)}}function changeAddress(e,t,s){$("#"+e).mouseenter(function(){$("#"+e+" .select-options").show()}),$("#"+e).mouseleave(function(){$("#"+e+"  .select-options").hide()}),$("#"+e+" .select-options li").click(function(){$("#"+e+" .select-name").html($(this)[0].innerHTML),$("#"+e+" .select-options").hide();$(this).attr("value");if(null!=t){var a={citycode:$(this).attr("value"),flag:t};getData(config.addressUrl,"get","jsonp",a,s)}})}function setOverflowY(e){var t=$("#"+e+" .select-options"),s=$("#"+e+" .select-options li");t.height()<122?(t.css("overflow-y","inherit"),s.css("width","100%")):(t.css("overflow-y","scroll"),s.css("width","93px"))}function createPage(e,t,s,a,n){var o=Math.ceil(e/t);$(".appra-num").html(e);var i=(s+t)/t,r="<div class='rate-page'>";r+=1==i?"<span class='page-prev'>&lt;&lt;上一页</span>":"<a href='javascript:;' class='page-prev'>&lt;&lt;上一页</a>";for(l=1;l<=o;l++)r+=l==i?"<span>"+l+"</span>":"<a href='javascript:;'>"+l+"</a>";r+=i==o?"<span class='page-next'>下一页&gt;&gt;</span>":"<a href='javascript:;' class='page-next'>下一页&gt;&gt;</a>",r+="</div>",$("."+a+" .rate-page").remove(),$("."+a).append($(r)),$(".page-prev").click(function(){if("A"==this.nodeName){var e={flag:2,startIndex:s=t*--i-t,amount:t};getData(config.productUrl,"get","jsonp",e,n)}}),$(".page-next").click(function(){if("A"==this.nodeName){var e={flag:2,startIndex:s=t*++i-t,amount:t};getData(config.productUrl,"get","jsonp",e,n),e={flag:1},getData(config.productUrl,"get","jsonp",e,createPage)}});for(var c=$(".rate-page")[0].children,l=1;l<c.length-1;l++)$(c[l]).click(function(){if("A"==this.nodeName){i=this.innerHTML;var e={flag:2,startIndex:s=t*i-t,amount:t};getData(config.productUrl,"get","jsonp",e,n)}})}function resetData(e){var t=$("."+e).val();return t=Tools.removeAll(t),$("."+e).val(t),t}function showCheckResult(e,t,s,a){0==s?($("."+e+" .notice-info").css("display","inline-block"),t.length>0&&$("."+e+" ."+t).css("border-color","#e22"),$("."+e+" .notice-content").css("color","#e22"),$("."+e+" .notice-icon").css({"background-position":"-17px -100px"})):1==s&&($("."+e+" .notice-info").css("display","inline-block"),$("."+e+" .notice-content").css("color","#3D882D"),$("."+e+" .notice-icon").css({"background-position":"0px -117px"})),$("."+e+" .notice-content")[0].innerHTML=a}function hideCheckResult(e,t){$("."+e+" .notice-info").css("display","none"),t.length>0&&$("."+e+" ."+t).css("border-color","#C2C2C2")}function hideNotice(e){$("."+e+" .tips").hide()}function showNotice(e){$("."+e+" .tips").show()}function checkUsername(){var e=resetData("input-username"),t=e.charAt(0);if(0==e.length)return 1;if(e.length<3||e.length>15)return 2;var s=/^[A-Za-z]*$/;return s.test(t)?(s=/^[A-Za-z0-9_]*$/,s.test(e)?5:4):3}function checkPassword(){var e=resetData("input-password");return 0==e.length?1:e.length<6||e.length>16?2:3}function showUsernameResult(){hideNotice("username");var e=checkUsername();return 1==e?(showCheckResult("username","input-username",0,"请填写用户名"),!1):2==e?(showCheckResult("username","input-username",0,"长度应为3~15个字符"),!1):3==e?(showCheckResult("username","input-username",0,"用户名必需以英文字母开头"),!1):4==e?(showCheckResult("username","input-username",0,"用户名需由字母、数字或下划线组成"),!1):5==e?(showCheckResult("username","input-username",1,"用户名填写正确"),!0):void 0}function showPasswordResult(){hideNotice("password");var e=checkPassword();return 1==e?(showCheckResult("password","input-password",0,"请填写密码"),!1):2==e?(showCheckResult("password","input-password",0,"密码长度应为6~16个字符"),!1):3==e?(showCheckResult("password","input-password",1,"您的密码输入正确"),!0):void 0}function registeredAccount(){$(".buttonRegister").on("click",function(){if(event.stopPropagation(),showUsernameResult()&&showPasswordResult()&&showSecondPasswordResult()&&showEmailResult())if(0!=isAgree()){var e={username:$(".input-username").val(),password:$(".input-password").val(),email:$(".input-email").val()};getData(config.registerUrl,"post","text",e,getRegisterInfo)}else showCheckResult("clause","",0,"请接受服务条款")})}function checkSecondPassword(){var e=resetData("input-password"),t=resetData("input-password-again");return 0==t.length?1:e!=t?2:3}function checkEmail(){var e=resetData("input-email");return 0==e.length?1:/^\w+([_\.\-]\w+)*@\w+([_\-\.]\w+)*\.\w+([_\.]\w+)*$/.test(e)?4:3}function isAgree(){return document.getElementById("agree").checked}function recoverStatus(){$(document).on("click",function(){5!=checkUsername()&&(hideCheckResult("username","input-username"),showNotice("username")),3!=checkPassword()&&(hideCheckResult("password","input-password"),showNotice("password")),3!=checkSecondPassword()&&(hideCheckResult("password-again","input-password-again"),showNotice("password-again")),4!=checkEmail()&&(hideCheckResult("email","input-email"),showNotice("email")),1!=isAgree()&&(hideCheckResult("clause",""),showNotice("clause"))}),$(".register input").on("click",function(){var e=$(this).attr("data-class");void 0!=e&&($("."+e+" .tips").show(),$("."+e+" .notice-info").hide())})}function showSecondPasswordResult(){hideNotice("password-again");var e=checkSecondPassword();return 1==e?(showCheckResult("password-again","input-password-again",0,"请再次填写密码"),!1):2==e?(showCheckResult("password-again","input-password-again",0,"两次填写的密码不一致"),!1):3==e?(showCheckResult("password-again","input-password-again",1,"您的密码输入正确"),!0):void 0}function showEmailResult(){hideNotice("email");var e=checkEmail();return 1==e?(showCheckResult("email","input-email",0,"请填写您的邮箱地址"),!1):2==e?(showCheckResult("email","input-email",0,"长度应为6~18个字符"),!1):3==e?(showCheckResult("email","input-email",0,"邮箱的格式不正确"),!1):4==e?(showCheckResult("email","input-email",1,"您填写的邮箱正确"),!0):void 0}var Tools={removeAll:function(e){return e.replace(/\s+/g,"")}},config={addressUrl:"http://localhost/dswzServer/place.php",advisoryUrl:"http://localhost/dswzServer/advisory.php",productUrl:"http://localhost/dswzServer/product.php",taobaoUrl:"https://suggest.taobao.com/sug",baiduUrl:"http://www.baidu.com/s",registerUrl:"http://localhost/dswzServer/register.php",loginUrl:"http://localhost/dswzServer/login.php",advisoryStartIndex:0,advisoryAmount:5,productStartIndex:0,productAmount:6};$(function(){registeredAccount(),recoverStatus()});var getRegisterInfo=function(e){if(1==e){var t=3;$(".show-result").html("注册成功&nbsp;<span class='time'>3</span>&nbsp;秒后跳转到登录页").show();var s=setInterval(function(){t-=1,$(".show-result .time").text(t),0==t&&(clearInterval(s),window.location="login.html")},1e3)}else 0==e?($(".show-result").html('<span class="text">注册失败</span><button class="close-btn"><i class="fa fa-times"></i></button>').show(),$(".close-btn").on("click",function(){$(".show-result").html("").hide()})):2==e&&($(".show-result").html('<span class="text">用户名已存在</span><button class="close-btn"><i class="fa fa-times"></i></button>').show(),$(".close-btn").on("click",function(){$(".show-result").html("").hide()}))};