function setBanner(){function e(){n=++n>s.length-1?0:n,t.removeClass("current"),t.eq(n).addClass("current"),s.removeClass("active");var e=s.eq(n);e.addClass("active"),e.css("opacity","0"),animate(e[0],{opacity:100},40)}var t=$(".circle-list li"),s=$(".banner-list li"),n=0,a=null;t.on("click",function(){if($(this).index()!=n){n=$(this).index(),$(this).addClass("current").siblings("li").removeClass("current"),s.removeClass("active");var e=s.eq(n);e.addClass("active"),e.css("opacity","0"),animate(e[0],{opacity:100},40)}}),a=setInterval(e,3e3),$(".banner-list").mouseenter(function(){clearInterval(a)}),$(".banner-list").mouseleave(function(){a=setInterval(e,3e3)})}function getData(e,t,s,n,a){$.ajax({url:e,type:t,dataType:s,data:n,success:a})}function setAddress(e,t,s,n){$("#"+e+" .select-options").children("li").remove(),$.each(t,function(t,s){var n=$("<li></li>").html(s.name).attr("value",s.code);$("#"+e+" .select-options").append(n)});var a=$("#"+e+" .select-options").children("li:eq(0)").attr("value"),o=$("#"+e+" .select-options").children("li:eq(0)")[0].innerHTML;if($("#"+e+" .select-name").html(o),null!=s){var i={citycode:a,flag:s};getData(config.addressUrl,"get","jsonp",i,n)}}function changeAddress(e,t,s){$("#"+e).mouseenter(function(){$("#"+e+" .select-options").show()}),$("#"+e).mouseleave(function(){$("#"+e+"  .select-options").hide()}),$("#"+e+" .select-options li").click(function(){$("#"+e+" .select-name").html($(this)[0].innerHTML),$("#"+e+" .select-options").hide();$(this).attr("value");if(null!=t){var n={citycode:$(this).attr("value"),flag:t};getData(config.addressUrl,"get","jsonp",n,s)}})}function setOverflowY(e){var t=$("#"+e+" .select-options"),s=$("#"+e+" .select-options li");t.height()<122?(t.css("overflow-y","inherit"),s.css("width","100%")):(t.css("overflow-y","scroll"),s.css("width","93px"))}function createPage(e,t,s,n,a){var o=Math.ceil(e/t);$(".appra-num").html(e);var i=(s+t)/t,r="<div class='rate-page'>";r+=1==i?"<span class='page-prev'>&lt;&lt;上一页</span>":"<a href='javascript:;' class='page-prev'>&lt;&lt;上一页</a>";for(l=1;l<=o;l++)r+=l==i?"<span>"+l+"</span>":"<a href='javascript:;'>"+l+"</a>";r+=i==o?"<span class='page-next'>下一页&gt;&gt;</span>":"<a href='javascript:;' class='page-next'>下一页&gt;&gt;</a>",r+="</div>",$("."+n+" .rate-page").remove(),$("."+n).append($(r)),$(".page-prev").click(function(){if("A"==this.nodeName){var e={flag:2,startIndex:s=t*--i-t,amount:t};getData(config.productUrl,"get","jsonp",e,a)}}),$(".page-next").click(function(){if("A"==this.nodeName){var e={flag:2,startIndex:s=t*++i-t,amount:t};getData(config.productUrl,"get","jsonp",e,a),e={flag:1},getData(config.productUrl,"get","jsonp",e,createPage)}});for(var c=$(".rate-page")[0].children,l=1;l<c.length-1;l++)$(c[l]).click(function(){if("A"==this.nodeName){i=this.innerHTML;var e={flag:2,startIndex:s=t*i-t,amount:t};getData(config.productUrl,"get","jsonp",e,a)}})}function resetData(e){var t=$("."+e).val();return t=Tools.removeAll(t),$("."+e).val(t),t}function showCheckResult(e,t,s,n){0==s?($("."+e+" .notice-info").css("display","inline-block"),t.length>0&&$("."+e+" ."+t).css("border-color","#e22"),$("."+e+" .notice-content").css("color","#e22"),$("."+e+" .notice-icon").css({"background-position":"-17px -100px"})):1==s&&($("."+e+" .notice-info").css("display","inline-block"),$("."+e+" .notice-content").css("color","#3D882D"),$("."+e+" .notice-icon").css({"background-position":"0px -117px"})),$("."+e+" .notice-content")[0].innerHTML=n}function hideCheckResult(e,t){$("."+e+" .notice-info").css("display","none"),t.length>0&&$("."+e+" ."+t).css("border-color","#C2C2C2")}function hideNotice(e){$("."+e+" .tips").hide()}function showNotice(e){$("."+e+" .tips").show()}function checkUsername(){var e=resetData("input-username"),t=e.charAt(0);if(0==e.length)return 1;if(e.length<3||e.length>15)return 2;var s=/^[A-Za-z]*$/;return s.test(t)?(s=/^[A-Za-z0-9_]*$/,s.test(e)?5:4):3}function checkPassword(){var e=resetData("input-password");return 0==e.length?1:e.length<6||e.length>16?2:3}function showUsernameResult(){hideNotice("username");var e=checkUsername();return 1==e?(showCheckResult("username","input-username",0,"请填写用户名"),!1):2==e?(showCheckResult("username","input-username",0,"长度应为3~15个字符"),!1):3==e?(showCheckResult("username","input-username",0,"用户名必需以英文字母开头"),!1):4==e?(showCheckResult("username","input-username",0,"用户名需由字母、数字或下划线组成"),!1):5==e?(showCheckResult("username","input-username",1,"用户名填写正确"),!0):void 0}function showPasswordResult(){hideNotice("password");var e=checkPassword();return 1==e?(showCheckResult("password","input-password",0,"请填写密码"),!1):2==e?(showCheckResult("password","input-password",0,"密码长度应为6~16个字符"),!1):3==e?(showCheckResult("password","input-password",1,"您的密码输入正确"),!0):void 0}function loginAccount(){$(".buttonlogin").on("click",function(){if(event.stopPropagation(),showUsernameResult()&&showPasswordResult()){document.getElementById("remember").checked&&saveUserInfo();var e={username:$(".input-username").val(),password:$(".input-password").val()};getData(config.loginUrl,"post","text",e,getLoginInfo)}})}function recoverStatus(){$(document).on("click",function(){5!=checkUsername()&&(hideCheckResult("username","input-username"),showNotice("username")),3!=checkPassword()&&(hideCheckResult("password","input-password"),showNotice("password"))}),$(".login input").on("click",function(){var e=$(this).attr("data-class");void 0!=e&&($("."+e+" .tips").show(),$("."+e+" .notice-info").hide())})}function saveUserInfo(){var e=$(".input-username").val(),t=$(".input-password").val();if(e.length>0&&t.length>0){var s={username:e,password:t};localStorage.setItem("userInfo",JSON.stringify(s))}}function readUserInfo(){var e=JSON.parse(localStorage.getItem("userInfo"));null!=e&&($(".input-username").val(e.username),$(".input-password").val(e.password))}var Tools={removeAll:function(e){return e.replace(/\s+/g,"")}},config={addressUrl:"http://localhost/dswzServer/place.php",advisoryUrl:"http://localhost/dswzServer/advisory.php",productUrl:"http://localhost/dswzServer/product.php",taobaoUrl:"https://suggest.taobao.com/sug",baiduUrl:"http://www.baidu.com/s",registerUrl:"http://localhost/dswzServer/register.php",loginUrl:"http://localhost/dswzServer/login.php",advisoryStartIndex:0,advisoryAmount:5,productStartIndex:0,productAmount:6};$(function(){readUserInfo(),loginAccount(),recoverStatus()});var getLoginInfo=function(e){if(1==e)$(".show-result").html('<span class="text">您输入的用户名不存在</span><button class="close-btn"><i class="fa fa-times"></i></button>').css("visibility","visible"),$(".close-btn").on("click",function(){$(".show-result").html("").css("visibility","hidden")});else if(2==e)$(".show-result").html('<span class="text">您输入的密码与用户名不匹配</span><button class="close-btn"><i class="fa fa-times"></i></button>').css("visibility","visible"),$(".close-btn").on("click",function(){$(".show-result").html("").css("visibility","hidden")});else if(3==e){var t=3;$(".show-result").html("登录成功&nbsp;<span class='time'>3</span>&nbsp;秒后跳转到网站首页").css("visibility","visible");var s=setInterval(function(){t-=1,$(".show-result .time").text(t),0==t&&(clearInterval(s),localStorage.setItem("username",$(".input-username").val()),window.location="index.html")},1e3)}};